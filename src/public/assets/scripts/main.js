angular.module("dias.export",["dias.api","dias.ui"]),angular.module("dias.export").config(["$compileProvider",function(t){"use strict";t.debugInfoEnabled(!1)}]),angular.module("dias.export").controller("TransectReportRequestController",["$scope","TransectReport","msg","TRANSECT_ID",function(t,a,e,n){"use strict";var r={annotations:["basic","extended","full","csv"],"image-labels":["basic","csv"]},o={annotations:["exportArea","separateLabelTrees","annotationSession"],"image-labels":["annotationSession"]},s={type:"annotations",variant:"basic",options:{exportArea:!1,separateLabelTrees:!1,annotationSession:null}};t.form=angular.copy(s),t.state={success:!1,loading:!1},t.error={},t.availableVariants=r[t.form.type];var i=function(){t.state.success=!0,t.state.loading=!1,t.form=angular.copy(s),t.error={}},p=function(a){t.state.loading=!1,t.success=!1,422===a.status?t.error=a.data:e.responseError(a)};t.selectType=function(a){t.form.type=a},t.wantsType=function(a){return t.form.type===a},t.wantsCombination=function(a,e){return t.wantsType(a)&&t.form.variant===e},t.submit=function(){for(var e={},r=o[t.form.type],s=r.length-1;s>=0;s--)e[r[s]]=t.form.options[r[s]];t.state.loading=!0,a.requestGenericReport({transect_id:n,type:t.form.type,variant:t.form.variant},e,i,p)},t.$watch("form.type",function(a){t.availableVariants=r[a],t.form.variant=t.availableVariants[0]})}]),angular.module("dias.export").factory("TransectReport",["$resource","URL",function(t,a){"use strict";return t(a+"/api/v1/transects/:transect_id/reports/:type/:variant",{},{requestGenericReport:{method:"POST"},requestBasicAnnotationReport:{method:"POST",params:{type:"annotations",variant:"basic"}},requestExtendedAnnotationReport:{method:"POST",params:{type:"annotations",variant:"extended"}},requestFullAnnotationReport:{method:"POST",params:{type:"annotations",variant:"full"}},requestCsvAnnotationReport:{method:"POST",params:{type:"annotations",variant:"csv"}},requestBasicImageLabelReport:{method:"POST",params:{type:"image-labels",variant:"basic"}},requestCsvImageLabelReport:{method:"POST",params:{type:"image-labels",variant:"csv"}}})}]);