(()=>{"use strict";var e,t={977:()=>{var e=biigle.$require("messages").handleErrorResponse,t=biigle.$require("labelTrees.components.labelTrees");function s(e,t,s,r,n,a,i,o){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=s,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=l):n&&(l=o?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var p=u.render;u.render=function(e,t){return l.call(t),p(e,t)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:u}}const r=s({mixins:[biigle.$require("core.mixins.loader")],components:{labelTrees:t},data:function(){return{allowedOptions:{},selectedType:"",selectedVariant:"",reportTypes:[],labelTrees:[],hasOnlyLabels:!1,success:!1,errors:{},options:{export_area:!1,newest_label:!1,separate_label_trees:!1,separate_users:!1,only_labels:[],aggregate_child_labels:!1}}},computed:{flatLabels:function(){var e=[];return this.labelTrees.forEach((function(t){Array.prototype.push.apply(e,t.labels)})),e},selectedLabels:function(){return this.flatLabels.filter((function(e){return e.selected}))},selectedLabelsCount:function(){return this.selectedLabels.length},variants:function(){var e={};return this.reportTypes.forEach((function(t){var s=t.name.split("\\");e.hasOwnProperty(s[0])||(e[s[0]]=[]),e[s[0]].push(s[1])})),e},availableReportTypes:function(){var e={};return this.reportTypes.forEach((function(t){e[t.name]=t.id})),e},selectedReportTypeId:function(){return this.availableReportTypes[this.selectedType+"\\"+this.selectedVariant]},availableVariants:function(){return this.variants[this.selectedType]},onlyOneAvailableVariant:function(){return 1===this.availableVariants.length},selectedOptions:function(){var e=this,t={};return this.allowedOptions[this.selectedType].forEach((function(s){t[s]=e.options[s]})),t.type_id=this.selectedReportTypeId,t}},methods:{request:function(e,t){this.loading||(this.success=!1,this.startLoading(),t.save({id:e},this.selectedOptions).then(this.submitted,this.handleError).finally(this.finishLoading))},submitted:function(){this.success=!0,this.errors={}},handleError:function(t){422===t.status?t.data.hasOwnProperty("errors")?this.errors=t.data.errors:this.errors=t.data:e(t)},selectType:function(e){this.selectedType=e,-1===this.availableVariants.indexOf(this.selectedVariant)&&(this.selectedVariant=this.availableVariants[0])},wantsType:function(e){return this.selectedType===e},wantsVariant:function(e){return Array.isArray(e)?-1!==e.indexOf(this.selectedVariant):this.selectedVariant===e},hasError:function(e){return this.errors.hasOwnProperty(e)},getError:function(e){return this.errors[e]?this.errors[e].join(" "):""},wantsCombination:function(e,t){return this.wantsType(e)&&this.wantsVariant(t)}},watch:{selectedLabels:function(e){this.options.only_labels=e.map((function(e){return e.id}))},hasOnlyLabels:function(e){e||this.flatLabels.forEach((function(e){e.selected=!1}))},"options.separate_label_trees":function(e){e&&(this.options.separate_users=!1)},"options.separate_users":function(e){e&&(this.options.separate_label_trees=!1)}},created:function(){this.reportTypes=biigle.$require("reports.reportTypes"),this.selectedType=Object.keys(this.variants)[0],this.selectedVariant=this.availableVariants[0];var e=biigle.$require("reports.labelTrees");e.forEach((function(e){e.labels.forEach((function(e){e.selected=!1}))})),this.labelTrees=e}},undefined,undefined,!1,null,null,null).exports,n=Vue.resource("/api/v1/projects{/id}/reports");const a=s({mixins:[r],data:function(){return{projectId:null,allowedOptions:{ImageAnnotations:["export_area","newest_label","separate_label_trees","separate_users","only_labels","aggregate_child_labels"],ImageLabels:["separate_label_trees","separate_users","only_labels"],VideoAnnotations:["newest_label","separate_label_trees","separate_users","annotation_session_id","only_labels"],VideoLabels:["separate_label_trees","separate_users","only_labels"]}}},methods:{submit:function(){this.request(this.projectId,n)}},created:function(){this.projectId=biigle.$require("reports.projectId")}},undefined,undefined,!1,null,null,null).exports,i=Vue.resource("/api/v1/volumes{/id}/reports");const o=s({mixins:[r],data:function(){return{allowedOptions:{ImageAnnotations:["export_area","newest_label","separate_label_trees","separate_users","annotation_session_id","only_labels","aggregate_child_labels"],ImageLabels:["separate_label_trees","separate_users","annotation_session_id","only_labels"],VideoAnnotations:["newest_label","separate_label_trees","separate_users","annotation_session_id","only_labels"],VideoLabels:["separate_label_trees","separate_users","annotation_session_id","only_labels"]},options:{annotation_session_id:null}}},methods:{submit:function(){this.request(this.volumeId,i)}},created:function(){this.volumeId=biigle.$require("reports.volumeId")}},undefined,undefined,!1,null,null,null).exports;biigle.$mount("project-report-form",a),biigle.$mount("volume-report-form",o)},608:()=>{}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,s,n,a)=>{if(!s){var i=1/0;for(u=0;u<e.length;u++){for(var[s,n,a]=e[u],o=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](s[l])))?s.splice(l--,1):(o=!1,a<i&&(i=a));o&&(e.splice(u--,1),t=n())}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,n,a]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={355:0,392:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[i,o,l]=s,u=0;for(n in o)r.o(o,n)&&(r.m[n]=o[n]);for(l&&l(r),t&&t(s);u<i.length;u++)a=i[u],r.o(e,a)&&e[a]&&e[a][0](),e[i[u]]=0;r.O()},s=self.webpackChunkbiigle_reports=self.webpackChunkbiigle_reports||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),r.O(void 0,[392],(()=>r(977)));var n=r.O(void 0,[392],(()=>r(608)));n=r.O(n)})();