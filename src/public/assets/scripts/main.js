biigle.$viewModel("export-project-report-form",function(e){var t=biigle.$require("export.projectId");new Vue({el:e,mixins:[biigle.$require("export.mixins.reportForm")],data:{variants:{annotations:["basic","extended","area","full","csv"],"image-labels":["basic","csv"]},allowedOptions:{annotations:["exportArea","separateLabelTrees"],"image-labels":["separateLabelTrees"]}},methods:{submit:function(){this.request(t,"projects")}}})}),biigle.$viewModel("export-volume-report-form",function(e){var t=biigle.$require("export.volumeId");new Vue({el:e,mixins:[biigle.$require("export.mixins.reportForm")],data:{variants:{annotations:["basic","extended","area","full","csv"],"image-labels":["basic","csv"]},allowedOptions:{annotations:["exportArea","separateLabelTrees","annotationSession"],"image-labels":["separateLabelTrees","annotationSession"]},options:{annotationSession:null}},methods:{submit:function(){this.request(t,"volumes")}}})}),biigle.$declare("export.api.reports",Vue.resource("/api/v1{/model}{/id}/reports{/type}{/variant}",{},{request:{method:"POST"}})),biigle.$component("export.mixins.reportForm",{mixins:[biigle.$require("core.mixins.loader")],data:{variants:{},allowedOptions:{},selectedType:"annotations",selectedVariant:"basic",success:!1,errors:{},options:{exportArea:!1,separateLabelTrees:!1}},computed:{availableVariants:function(){return this.variants[this.selectedType]},selectedOptions:function(){for(var e=this.allowedOptions[this.selectedType],t={},i=e.length-1;i>=0;i--)t[e[i]]=this.options[e[i]];return t}},methods:{request:function(e,t){this.loading||(this.success=!1,this.startLoading(),biigle.$require("export.api.reports").request({id:e,model:t,type:this.selectedType,variant:this.selectedVariant},this.selectedOptions).then(this.submitted,this.handleError).finally(this.finishLoading))},submitted:function(){this.success=!0,this.errors={}},handleError:function(e){422===e.status?this.errors=e.data:biigle.$require("messages.store").handleErrorResponse(e)},selectType:function(e){this.selectedType=e,this.availableVariants.indexOf(this.selectedVariant)===-1&&(this.selectedVariant=this.availableVariants[0])},wantsType:function(e){return this.selectedType===e},hasError:function(e){return this.errors.hasOwnProperty(e)},getError:function(e){return this.errors[e]?this.errors[e].join(" "):""},wantsCombination:function(e,t){return this.selectedType===e&&this.selectedVariant===t}}});