!function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}({0:function(e,t,r){r("Or9D"),e.exports=r("zcrr")},Or9D:function(e,t,r){"use strict";r.r(t);var s=biigle.$require("messages").handleErrorResponse,i=biigle.$require("labelTrees.components.labelTrees"),n={mixins:[biigle.$require("core.mixins.loader")],components:{labelTrees:i},data:{allowedOptions:{},selectedType:"",selectedVariant:"",reportTypes:[],labelTrees:[],hasOnlyLabels:!1,success:!1,errors:{},options:{export_area:!1,newest_label:!1,separate_label_trees:!1,only_labels:[],aggregate_child_labels:!1}},computed:{flatLabels:function(){var e=[];return this.labelTrees.forEach((function(t){Array.prototype.push.apply(e,t.labels)})),e},selectedLabels:function(){return this.flatLabels.filter((function(e){return e.selected}))},selectedLabelsCount:function(){return this.selectedLabels.length},variants:function(){var e={};return this.reportTypes.forEach((function(t){var r=t.name.split("\\");e.hasOwnProperty(r[0])||(e[r[0]]=[]),e[r[0]].push(r[1])})),e},availableReportTypes:function(){var e={};return this.reportTypes.forEach((function(t){e[t.name]=t.id})),e},selectedReportTypeId:function(){return this.availableReportTypes[this.selectedType+"\\"+this.selectedVariant]},availableVariants:function(){return this.variants[this.selectedType]},onlyOneAvailableVariant:function(){return 1===this.availableVariants.length},selectedOptions:function(){var e=this,t={};return this.allowedOptions[this.selectedType].forEach((function(r){t[r]=e.options[r]})),t.type_id=this.selectedReportTypeId,t}},methods:{request:function(e,t){this.loading||(this.success=!1,this.startLoading(),t.save({id:e},this.selectedOptions).then(this.submitted,this.handleError).finally(this.finishLoading))},submitted:function(){this.success=!0,this.errors={}},handleError:function(e){422===e.status?this.errors=e.data:s(e)},selectType:function(e){this.selectedType=e,-1===this.availableVariants.indexOf(this.selectedVariant)&&(this.selectedVariant=this.availableVariants[0])},wantsType:function(e){return this.selectedType===e},wantsVariant:function(e){return Array.isArray(e)?-1!==e.indexOf(this.selectedVariant):this.selectedVariant===e},hasError:function(e){return this.errors.hasOwnProperty(e)},getError:function(e){return this.errors[e]?this.errors[e].join(" "):""},wantsCombination:function(e,t){return this.wantsType(e)&&this.wantsVariant(t)}},watch:{selectedLabels:function(e){this.options.only_labels=e.map((function(e){return e.id}))},hasOnlyLabels:function(e){e||this.flatLabels.forEach((function(e){e.selected=!1}))}},created:function(){this.reportTypes=biigle.$require("reports.reportTypes"),this.selectedType=Object.keys(this.variants)[0],this.selectedVariant=this.availableVariants[0],this.labelTrees=biigle.$require("reports.labelTrees")}},a=Vue.resource("/api/v1/projects{/id}/reports"),o={mixins:[n],data:{projectId:null,allowedOptions:{Annotations:["export_area","newest_label","separate_label_trees","only_labels","aggregate_child_labels"],ImageLabels:["separate_label_trees","only_labels"],VideoAnnotations:["separate_label_trees","only_labels"]}},methods:{submit:function(){this.request(this.projectId,a)}},created:function(){this.projectId=biigle.$require("reports.projectId")}},l=Vue.resource("/api/v1/videos{/id}/reports"),u={mixins:[n],data:{videoId:null,selectedType:"VideoAnnotations",selectedVariant:"Csv",allowedOptions:{VideoAnnotations:["separate_label_trees","only_labels"]}},methods:{submit:function(){this.request(this.videoId,l)}},created:function(){this.videoId=biigle.$require("reports.videoId")}},c=Vue.resource("/api/v1/volumes{/id}/reports"),d={mixins:[n],data:{allowedOptions:{Annotations:["export_area","newest_label","separate_label_trees","annotation_session_id","only_labels","aggregate_child_labels"],ImageLabels:["separate_label_trees","annotation_session_id","only_labels"]},options:{annotation_session_id:null}},methods:{submit:function(){this.request(this.volumeId,c)}},created:function(){this.volumeId=biigle.$require("reports.volumeId")}};biigle.$mount("project-report-form",o),biigle.$mount("video-report-form",u),biigle.$mount("volume-report-form",d)},zcrr:function(e,t){}});